# Immich äººè„¸è¯†åˆ«åŠŸèƒ½å®ç°æ€è·¯æ€»ç»“

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

**è¾“å…¥**ï¼šä¸€å¼ ç…§ç‰‡  
**è¾“å‡º**ï¼š
1. ç…§ç‰‡ä¸­æ‰€æœ‰è¯†åˆ«åˆ°çš„äººç‰©åç§°
2. æ¯ä¸ªäººç‰©å¯¹åº”çš„ 10 å¼ ç›¸å…³ç…§ç‰‡

## ğŸ”„ å®ç°æµç¨‹ï¼ˆ4 ä¸ªæ­¥éª¤ï¼‰

### Step 1: ä¸Šä¼ ç…§ç‰‡
```
POST /api/asset/upload
â†’ è¿”å› asset_id
```

### Step 2: ç­‰å¾…å¤„ç†
```
è½®è¯¢ GET /api/asset/{asset_id}
â†’ æ£€æŸ¥ faces æˆ– people å­—æ®µ
â†’ ç­‰å¾… 5-30 ç§’ï¼ˆå–å†³äºç…§ç‰‡å¤§å°ï¼‰
```

### Step 3: è·å–äººç‰©ä¿¡æ¯
```
GET /api/asset/{asset_id}
â†’ æå– people[] æ•°ç»„
â†’ æ¯ä¸ªäººç‰©åŒ…å«: id, name
```

### Step 4: è·å–äººç‰©ç…§ç‰‡
```
å¯¹æ¯ä¸ªäººç‰©:
  GET /api/person/{person_id}/assets?size=10
  â†’ è¿”å›è¯¥äººç‰©çš„ 10 å¼ ç…§ç‰‡
```

## ğŸ“‹ å…³é”® API ç«¯ç‚¹

| åŠŸèƒ½ | æ–¹æ³• | ç«¯ç‚¹ | å…³é”®å‚æ•° |
|------|------|------|----------|
| ä¸Šä¼ ç…§ç‰‡ | POST | `/api/asset/upload` | `assetData` (æ–‡ä»¶) |
| æŸ¥è¯¢èµ„äº§ | GET | `/api/asset/{id}` | `id` (èµ„äº§ID) |
| è·å–äººç‰©ç…§ç‰‡ | GET | `/api/person/{id}/assets` | `id` (äººç‰©ID), `size=10` |

## ğŸ’¡ å®ç°è¦ç‚¹

### 1. API è®¤è¯
æ‰€æœ‰è¯·æ±‚éœ€è¦åœ¨ Header ä¸­åŒ…å«ï¼š
```
x-api-key: YOUR_API_KEY
```

### 2. å¤„ç†æ—¶é—´
- å°ç…§ç‰‡ï¼š5-10 ç§’
- ä¸­ç­‰ç…§ç‰‡ï¼š10-30 ç§’
- å¤§ç…§ç‰‡ï¼š30 ç§’ - å‡ åˆ†é’Ÿ

### 3. è½®è¯¢ç­–ç•¥
```python
for i in range(20):  # æœ€å¤šé‡è¯• 20 æ¬¡
    asset = get_asset(asset_id)
    if asset.get('faces') or asset.get('people'):
        break  # å¤„ç†å®Œæˆ
    time.sleep(3)  # ç­‰å¾… 3 ç§’
```

### 4. äººç‰©å‘½å
- Immich é»˜è®¤ä¸ä¼šè‡ªåŠ¨å‘½åäººç‰©
- å¯èƒ½æ˜¾ç¤ºä¸º "Person 1", "Person 2"
- éœ€è¦åœ¨ Immich ç•Œé¢æ‰‹åŠ¨å‘½åï¼Œæˆ–é€šè¿‡ API æ›´æ–°

## ğŸ“ è¿”å›æ•°æ®æ ¼å¼

```json
{
  "asset_id": "asset-123",
  "people": [
    {
      "person_id": "person-1",
      "person_name": "å¼ ä¸‰",
      "photos": [
        {
          "id": "asset-1",
          "originalPath": "/path/to/photo1.jpg",
          "thumbnailPath": "/path/to/thumb1.jpg"
        }
        // ... æœ€å¤š 10 å¼ 
      ]
    }
  ]
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **äººç‰©å¯èƒ½æœªå‘½å**ï¼šéœ€è¦æ‰‹åŠ¨åœ¨ Immich ä¸­å‘½å
2. **å¤„ç†éœ€è¦æ—¶é—´**ï¼šéœ€è¦ç­‰å¾… Immich å®Œæˆäººè„¸è¯†åˆ«
3. **è¯†åˆ«å‡†ç¡®æ€§**ï¼šå–å†³äºç…§ç‰‡è´¨é‡ã€å…‰çº¿ç­‰å› ç´ 
4. **åŒä¸€äººç‰©å¯èƒ½è¢«è¯†åˆ«ä¸ºå¤šä¸ª**ï¼šéœ€è¦åœ¨ Immich ä¸­æ‰‹åŠ¨åˆå¹¶

## ğŸš€ ä¸‹ä¸€æ­¥

1. æŸ¥çœ‹è¯¦ç»†å®ç°æ€è·¯ï¼š`API_äººè„¸è¯†åˆ«å®ç°æ€è·¯.md`
2. æŸ¥çœ‹æµç¨‹å›¾ï¼š`API_æµç¨‹å›¾.md`
3. å¼€å§‹å®ç°ä»£ç 

